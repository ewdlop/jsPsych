var jsPsychWebgazerInitCamera=function(r){"use strict";var d="2.1.0";const p={name:"webgazer-init-camera",version:d,parameters:{instructions:{type:r.ParameterType.HTML_STRING,default:`
            <p>Position your head so that the webcam has a good view of your eyes.</p>
            <p>Center your face in the box and look directly towards the camera.</p>
            <p>It is important that you try and keep your head reasonably still throughout the experiment, so please take a moment to adjust your setup to be comfortable.</p>
            <p>When your face is centered in the box and the box is green, you can click to continue.</p>`},button_text:{type:r.ParameterType.STRING,default:"Continue"}},data:{load_time:{type:r.ParameterType.INT}},citations:{apa:"de Leeuw, J. R., Gilbert, R. A., & Luchterhandt, B. (2023). jsPsych: Enabling an Open-Source Collaborative Ecosystem of Behavioral Experiments. Journal of Open Source Software, 8(85), 5351. https://doi.org/10.21105/joss.05351 ",bibtex:'@article{Leeuw2023jsPsych, 	author = {de Leeuw, Joshua R. and Gilbert, Rebecca A. and Luchterhandt, Bj{\\" o}rn}, 	journal = {Journal of Open Source Software}, 	doi = {10.21105/joss.05351}, 	issn = {2475-9066}, 	number = {85}, 	year = {2023}, 	month = {may 11}, 	pages = {5351}, 	publisher = {Open Journals}, 	title = {jsPsych: Enabling an {Open}-{Source} {Collaborative} {Ecosystem} of {Behavioral} {Experiments}}, 	url = {https://joss.theoj.org/papers/10.21105/joss.05351}, 	volume = {8}, }  '}};class n{constructor(o){this.jsPsych=o}trial(o,s,y){const t=this.jsPsych.extensions.webgazer;let i;var h=performance.now(),c;const b=()=>{t.pause(),t.hideVideo();var e={load_time:c};document.querySelector("#webgazer-center-style").remove(),this.jsPsych.finishTrial(e),i()},u=()=>{y(),c=Math.round(performance.now()-h);var e=`
          <style id="webgazer-center-style">
            #webgazerVideoContainer { top: 20px !important; left: calc(50% - 160px) !important;}
          </style>
        `;document.querySelector("head").insertAdjacentHTML("beforeend",e);var l=`
          <div id='webgazer-init-container' style='position: relative; width:100vw; height:100vh'>
          </div>`;o.innerHTML=l,t.showVideo(),t.resume();var w=o.querySelector("#webgazer-init-container");if(w.innerHTML=`
          <div style='position: absolute; top: max(260px, 40%); left: calc(50% - 400px); width:800px;'>
          ${s.instructions}
          <button id='jspsych-wg-cont' class='jspsych-btn' disabled>${s.button_text}</button>
          </div>`,m())document.querySelector("#jspsych-wg-cont").disabled=!1;else{var a=new MutationObserver(g);a.observe(document,{attributes:!0,attributeFilter:["style"],subtree:!0})}document.querySelector("#jspsych-wg-cont").addEventListener("click",()=>{a&&a.disconnect(),b()})};t.isInitialized()?u():t.start().then(()=>{u()}).catch(e=>{console.log(e),o.innerHTML=`<p>The experiment cannot continue because the eye tracker failed to start.</p>
              <p>This may be because of a technical problem or because you did not grant permission for the page to use your camera.</p>`});function m(){return document.querySelector("#webgazerFaceFeedbackBox")?document.querySelector("#webgazerFaceFeedbackBox").style.borderColor=="green":!1}function g(e,l){e[0].target==document.querySelector("#webgazerFaceFeedbackBox")&&(e[0].type=="attributes"&&e[0].target.style.borderColor=="green"&&(document.querySelector("#jspsych-wg-cont").disabled=!1),e[0].type=="attributes"&&e[0].target.style.borderColor=="red"&&(document.querySelector("#jspsych-wg-cont").disabled=!0))}return new Promise(e=>{i=e})}}return n.info=p,n}(jsPsychModule);
//# sourceMappingURL=index.browser.min.js.map
