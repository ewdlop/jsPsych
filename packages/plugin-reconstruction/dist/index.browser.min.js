var jsPsychReconstruction=function(r){"use strict";var p="2.1.0";const _={name:"reconstruction",version:p,parameters:{stim_function:{type:r.ParameterType.FUNCTION,default:void 0},starting_value:{type:r.ParameterType.FLOAT,default:.5},step_size:{type:r.ParameterType.FLOAT,default:.05},key_increase:{type:r.ParameterType.KEY,default:"h"},key_decrease:{type:r.ParameterType.KEY,default:"g"},button_label:{type:r.ParameterType.STRING,default:"Continue"}},data:{start_value:{type:r.ParameterType.INT},final_value:{type:r.ParameterType.INT},rt:{type:r.ParameterType.INT}},citations:{apa:"de Leeuw, J. R., Gilbert, R. A., & Luchterhandt, B. (2023). jsPsych: Enabling an Open-Source Collaborative Ecosystem of Behavioral Experiments. Journal of Open Source Software, 8(85), 5351. https://doi.org/10.21105/joss.05351 ",bibtex:'@article{Leeuw2023jsPsych, 	author = {de Leeuw, Joshua R. and Gilbert, Rebecca A. and Luchterhandt, Bj{\\" o}rn}, 	journal = {Journal of Open Source Software}, 	doi = {10.21105/joss.05351}, 	issn = {2475-9066}, 	number = {85}, 	year = {2023}, 	month = {may 11}, 	pages = {5351}, 	publisher = {Open Journals}, 	title = {jsPsych: Enabling an {Open}-{Source} {Collaborative} {Ecosystem} of {Behavioral} {Experiments}}, 	url = {https://joss.theoj.org/papers/10.21105/joss.05351}, 	volume = {8}, }  '}};class h{constructor(e){this.jsPsych=e}trial(e,t){var a=t.starting_value;const s=()=>{var i=performance.now(),u=Math.round(i-c);this.jsPsych.pluginAPI.cancelKeyboardResponse(l);var y={rt:u,final_value:a,start_value:t.starting_value};this.jsPsych.finishTrial(y)},o=i=>{e.innerHTML='<div id="jspsych-reconstruction-stim-container">'+t.stim_function(i)+"</div>",e.innerHTML+='<button id="jspsych-reconstruction-next" class="jspsych-btn jspsych-reconstruction">'+t.button_label+"</button>",e.querySelector("#jspsych-reconstruction-next").addEventListener("click",s)},n=i=>{var u=t.key_increase,y=t.key_decrease;this.jsPsych.pluginAPI.compareKeys(i.key,u)?a=a+t.step_size:this.jsPsych.pluginAPI.compareKeys(i.key,y)&&(a=a-t.step_size),a=Math.max(Math.min(1,a),0),o(a)};var l=this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:n,valid_responses:[t.key_increase,t.key_decrease],rt_method:"performance",persist:!0,allow_held_key:!0});o(a);var c=performance.now()}simulate(e,t,a,s){t=="data-only"&&(s(),this.simulate_data_only(e,a)),t=="visual"&&this.simulate_visual(e,a,s)}create_simulation_data(e,t){const a={rt:this.jsPsych.randomization.sampleExGaussian(2e3,200,.005,!0),start_value:e.starting_value,final_value:this.jsPsych.randomization.randomInt(0,Math.round(1/e.step_size))*e.step_size},s=this.jsPsych.pluginAPI.mergeSimulationData(a,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,s),s}simulate_data_only(e,t){const a=this.create_simulation_data(e,t);this.jsPsych.finishTrial(a)}simulate_visual(e,t,a){const s=this.create_simulation_data(e,t),o=this.jsPsych.getDisplayElement();this.trial(o,e),a();let n=Math.round((s.final_value-e.starting_value)/e.step_size);const l=(s.rt-300)/n;let c=0;for(;n!=0;)n>0?(this.jsPsych.pluginAPI.pressKey(e.key_increase,c+l),n--):(this.jsPsych.pluginAPI.pressKey(e.key_decrease,c+l),n++),c+=l;this.jsPsych.pluginAPI.clickTarget(o.querySelector("#jspsych-reconstruction-next"),s.rt)}}return h.info=_,h}(jsPsychModule);
//# sourceMappingURL=index.browser.min.js.map
