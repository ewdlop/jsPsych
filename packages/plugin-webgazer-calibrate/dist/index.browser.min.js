var jsPsychWebgazerCalibrate=function(t){"use strict";var h="2.1.0";const _={name:"webgazer-calibrate",version:h,parameters:{calibration_points:{type:t.ParameterType.INT,default:[[10,10],[10,50],[10,90],[50,10],[50,50],[50,90],[90,10],[90,50],[90,90]],array:!0},calibration_mode:{type:t.ParameterType.SELECT,options:["click","view"],default:"click"},point_size:{type:t.ParameterType.INT,default:20},repetitions_per_point:{type:t.ParameterType.INT,default:1},randomize_calibration_order:{type:t.ParameterType.BOOL,default:!1},time_to_saccade:{type:t.ParameterType.INT,default:1e3},time_per_point:{type:t.ParameterType.INT,default:1e3}},data:{},citations:{apa:"de Leeuw, J. R., Gilbert, R. A., & Luchterhandt, B. (2023). jsPsych: Enabling an Open-Source Collaborative Ecosystem of Behavioral Experiments. Journal of Open Source Software, 8(85), 5351. https://doi.org/10.21105/joss.05351 ",bibtex:'@article{Leeuw2023jsPsych, 	author = {de Leeuw, Joshua R. and Gilbert, Rebecca A. and Luchterhandt, Bj{\\" o}rn}, 	journal = {Journal of Open Source Software}, 	doi = {10.21105/joss.05351}, 	issn = {2475-9066}, 	number = {85}, 	year = {2023}, 	month = {may 11}, 	pages = {5351}, 	publisher = {Open Journals}, 	title = {jsPsych: Enabling an {Open}-{Source} {Collaborative} {Ecosystem} of {Behavioral} {Experiments}}, 	url = {https://joss.theoj.org/papers/10.21105/joss.05351}, 	volume = {8}, }  '}};class d{constructor(r){this.jsPsych=r}trial(r,e){const i=this.jsPsych.extensions.webgazer;var y=`
          <div id='webgazer-calibrate-container' style='position: relative; width:100vw; height:100vh'>
          </div>`;r.innerHTML=y;var l=r.querySelector("#webgazer-calibrate-container"),u=0,o=-1,n=null;const b=()=>{e.randomize_calibration_order?n=this.jsPsych.randomization.shuffle(e.calibration_points):n=e.calibration_points,o=-1,c()},f=()=>{i.resume(),e.calibration_mode=="click"&&i.startMouseCalibration(),b()},c=()=>{if(o++,o==n.length)u++,u==e.repetitions_per_point?w():b();else{var a=n[o];v(a)}},v=a=>{var g=`<div id="calibration-point" style="width:${e.point_size}px; height:${e.point_size}px; border-radius:${e.point_size}px; border: 1px solid #000; background-color: #333; position: absolute; left:${a[0]}%; top:${a[1]}%;"></div>`;l.innerHTML=g;var p=l.querySelector("#calibration-point");if(e.calibration_mode=="click"&&(p.style.cursor="pointer",p.addEventListener("click",()=>{c()})),e.calibration_mode=="view"){var s=p.getBoundingClientRect(),T=s.left+s.width/2,z=s.top+s.height/2,L=performance.now()+e.time_to_saccade,j=performance.now()+e.time_to_saccade+e.time_per_point;const m=()=>{performance.now()>L&&i.calibratePoint(T,z),performance.now()<j?requestAnimationFrame(m):c()};requestAnimationFrame(m)}},w=()=>{e.calibration_mode=="click"&&i.stopMouseCalibration(),l.innerHTML="",P()},P=()=>{i.pause(),i.hidePredictions(),i.hideVideo();var a={};this.jsPsych.finishTrial(a)};f()}}return d.info=_,d}(jsPsychModule);
//# sourceMappingURL=index.browser.min.js.map
