var jsPsychCanvasButtonResponse=function(n){"use strict";var m="2.1.0";const h={name:"canvas-button-response",version:m,parameters:{stimulus:{type:n.ParameterType.FUNCTION,default:void 0},choices:{type:n.ParameterType.STRING,default:void 0,array:!0},button_html:{type:n.ParameterType.FUNCTION,default:function(c,t){return`<button class="jspsych-btn">${c}</button>`}},prompt:{type:n.ParameterType.HTML_STRING,default:null},stimulus_duration:{type:n.ParameterType.INT,default:null},trial_duration:{type:n.ParameterType.INT,default:null},button_layout:{type:n.ParameterType.STRING,default:"grid"},grid_rows:{type:n.ParameterType.INT,default:1},grid_columns:{type:n.ParameterType.INT,default:null},response_ends_trial:{type:n.ParameterType.BOOL,default:!0},canvas_size:{type:n.ParameterType.INT,array:!0,default:[500,500]}},data:{response:{type:n.ParameterType.INT},rt:{type:n.ParameterType.INT}},citations:{apa:"de Leeuw, J. R., Gilbert, R. A., & Luchterhandt, B. (2023). jsPsych: Enabling an Open-Source Collaborative Ecosystem of Behavioral Experiments. Journal of Open Source Software, 8(85), 5351. https://doi.org/10.21105/joss.05351 ",bibtex:'@article{Leeuw2023jsPsych, 	author = {de Leeuw, Joshua R. and Gilbert, Rebecca A. and Luchterhandt, Bj{\\" o}rn}, 	journal = {Journal of Open Source Software}, 	doi = {10.21105/joss.05351}, 	issn = {2475-9066}, 	number = {85}, 	year = {2023}, 	month = {may 11}, 	pages = {5351}, 	publisher = {Open Journals}, 	title = {jsPsych: Enabling an {Open}-{Source} {Collaborative} {Ecosystem} of {Behavioral} {Experiments}}, 	url = {https://joss.theoj.org/papers/10.21105/joss.05351}, 	volume = {8}, }  '}};class d{constructor(t){this.jsPsych=t}trial(t,e){const a=document.createElement("div");a.id="jspsych-canvas-button-response-stimulus";const s=document.createElement("canvas");s.id="jspsych-canvas-stimulus",s.height=e.canvas_size[0],s.width=e.canvas_size[1],s.style.display="block",a.appendChild(s),t.appendChild(a);const r=document.createElement("div");if(r.id="jspsych-canvas-button-response-btngroup",e.button_layout==="grid"){if(r.classList.add("jspsych-btn-group-grid"),e.grid_rows===null&&e.grid_columns===null)throw new Error("You cannot set `grid_rows` to `null` without providing a value for `grid_columns`.");const i=e.grid_columns===null?Math.ceil(e.choices.length/e.grid_rows):e.grid_columns,o=e.grid_rows===null?Math.ceil(e.choices.length/e.grid_columns):e.grid_rows;r.style.gridTemplateColumns=`repeat(${i}, 1fr)`,r.style.gridTemplateRows=`repeat(${o}, 1fr)`}else e.button_layout==="flex"&&r.classList.add("jspsych-btn-group-flex");for(const[i,o]of e.choices.entries()){r.insertAdjacentHTML("beforeend",e.button_html(o,i));const u=r.lastChild;u.dataset.choice=i.toString(),u.addEventListener("click",()=>{_(i)})}t.appendChild(r),e.prompt!==null&&t.insertAdjacentHTML("beforeend",e.prompt),e.stimulus(s);var y=performance.now(),l={rt:null,button:null};const p=()=>{var i={rt:l.rt,response:l.button};this.jsPsych.finishTrial(i)};function _(i){var o=performance.now(),u=Math.round(o-y);l.button=parseInt(i),l.rt=u,a.classList.add("responded");for(const g of r.children)g.setAttribute("disabled","disabled");e.response_ends_trial&&p()}e.stimulus_duration!==null&&this.jsPsych.pluginAPI.setTimeout(()=>{a.style.visibility="hidden"},e.stimulus_duration),e.trial_duration!==null&&this.jsPsych.pluginAPI.setTimeout(()=>{p()},e.trial_duration)}simulate(t,e,a,s){e=="data-only"&&(s(),this.simulate_data_only(t,a)),e=="visual"&&this.simulate_visual(t,a,s)}create_simulation_data(t,e){const a={rt:this.jsPsych.randomization.sampleExGaussian(500,50,.006666666666666667,!0),response:this.jsPsych.randomization.randomInt(0,t.choices.length-1)},s=this.jsPsych.pluginAPI.mergeSimulationData(a,e);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(t,s),s}simulate_data_only(t,e){const a=this.create_simulation_data(t,e);this.jsPsych.finishTrial(a)}simulate_visual(t,e,a){const s=this.create_simulation_data(t,e),r=this.jsPsych.getDisplayElement();this.trial(r,t),a(),s.rt!==null&&this.jsPsych.pluginAPI.clickTarget(r.querySelector(`#jspsych-canvas-button-response-btngroup [data-choice="${s.response}"]`),s.rt)}}return d.info=h,d}(jsPsychModule);
//# sourceMappingURL=index.browser.min.js.map
