var jsPsychMaxdiff=function(l){"use strict";var y="2.1.0";const b={name:"maxdiff",version:y,parameters:{alternatives:{type:l.ParameterType.STRING,array:!0,default:void 0},labels:{type:l.ParameterType.STRING,array:!0,default:void 0},randomize_alternative_order:{type:l.ParameterType.BOOL,default:!1},preamble:{type:l.ParameterType.HTML_STRING,default:""},button_label:{type:l.ParameterType.STRING,default:"Continue"},required:{type:l.ParameterType.BOOL,default:!1}},data:{rt:{type:l.ParameterType.INT},labels:{type:l.ParameterType.COMPLEX,nested:{left:{type:l.ParameterType.STRING},right:{type:l.ParameterType.STRING}}},response:{type:l.ParameterType.COMPLEX,nested:{left:{type:l.ParameterType.STRING},right:{type:l.ParameterType.STRING}}}},citations:{apa:"de Leeuw, J. R., Gilbert, R. A., & Luchterhandt, B. (2023). jsPsych: Enabling an Open-Source Collaborative Ecosystem of Behavioral Experiments. Journal of Open Source Software, 8(85), 5351. https://doi.org/10.21105/joss.05351 ",bibtex:'@article{Leeuw2023jsPsych, 	author = {de Leeuw, Joshua R. and Gilbert, Rebecca A. and Luchterhandt, Bj{\\" o}rn}, 	journal = {Journal of Open Source Software}, 	doi = {10.21105/joss.05351}, 	issn = {2475-9066}, 	number = {85}, 	year = {2023}, 	month = {may 11}, 	pages = {5351}, 	publisher = {Open Journals}, 	title = {jsPsych: Enabling an {Open}-{Source} {Collaborative} {Ecosystem} of {Behavioral} {Experiments}}, 	url = {https://joss.theoj.org/papers/10.21105/joss.05351}, 	volume = {8}, }  '}};class u{constructor(s){this.jsPsych=s}trial(s,t){var e="";e+='<style id="jspsych-maxdiff-css">',e+=".jspsych-maxdiff-statement {display:block; font-size: 16px; padding-top: 40px; margin-bottom:10px;}table.jspsych-maxdiff-table {border-collapse: collapse; padding: 15px; margin-left: auto; margin-right: auto;}table.jspsych-maxdiff-table td, th {border-bottom: 1px solid #dddddd; text-align: center; padding: 8px;}table.jspsych-maxdiff-table tr:nth-child(even) {background-color: #dddddd;}",e+="</style>",t.preamble!==null&&(e+='<div id="jspsych-maxdiff-preamble" class="jspsych-maxdiff-preamble">'+t.preamble+"</div>"),e+='<form id="jspsych-maxdiff-form">';for(var a=[],r=0;r<t.alternatives.length;r++)a.push(r);t.randomize_alternative_order&&(a=this.jsPsych.randomization.shuffle(a));for(var i='<table class="jspsych-maxdiff-table"><tr><th id="jspsych-maxdiff-left-label">'+t.labels[0]+'</th><th></th><th id="jspsych-maxdiff-right-label">'+t.labels[1]+"</th></tr>",r=0;r<t.alternatives.length;r++){var n=t.alternatives[a[r]];i+='<tr><td><input class= "jspsych-maxdiff-alt-'+r.toString()+'" type="radio" name="left" data-name = '+a[r].toString()+" /><br></td>",i+='<td id="jspsych-maxdiff-alternative-'+r.toString()+'">'+n+"</td>",i+='<td><input class= "jspsych-maxdiff-alt-'+r.toString()+'" type="radio" name="right" data-name = '+a[r].toString()+" /><br></td></tr>"}i+="</table><br><br>",e+=i;var g=t.required==!0?'disabled = "disabled"':"";e+='<input type="submit" id="jspsych-maxdiff-next" class="jspsych-maxdiff jspsych-btn" '+g+' value="'+t.button_label+'"></input>',e+="</form>",s.innerHTML=e,["left","right"].forEach(c=>{document.getElementsByName(c).forEach(d=>{d.addEventListener("click",()=>{var p=d.name=="left"?"right":"left",m=document.getElementsByClassName(d.className).namedItem(p);if(m.checked&&(m.checked=!1),t.required){var h=Array.prototype.slice.call(document.getElementsByName("left")).some(o=>o.checked),f=Array.prototype.slice.call(document.getElementsByName("right")).some(o=>o.checked);h&&f?document.getElementById("jspsych-maxdiff-next").disabled=!1:document.getElementById("jspsych-maxdiff-next").disabled=!0}})})}),s.querySelector("#jspsych-maxdiff-form").addEventListener("submit",c=>{c.preventDefault();var d=performance.now(),p=Math.round(d-v);function m(f){var o=s.querySelectorAll('[name="'+f+'"]:checked')[0];if(o===void 0)return null;var x=parseInt(o.getAttribute("data-name"));return t.alternatives[x]}var h={rt:p,labels:{left:t.labels[0],right:t.labels[1]},response:{left:m("left"),right:m("right")}};this.jsPsych.finishTrial(h)});var v=performance.now()}simulate(s,t,e,a){t=="data-only"&&(a(),this.simulate_data_only(s,e)),t=="visual"&&this.simulate_visual(s,e,a)}create_simulation_data(s,t){const e=this.jsPsych.randomization.sampleWithoutReplacement(s.alternatives,2),a={left:null,right:null};!s.required&&this.jsPsych.randomization.sampleBernoulli(.1)&&(e.pop(),this.jsPsych.randomization.sampleBernoulli(.8)&&e.pop()),e.length==1&&(this.jsPsych.randomization.sampleBernoulli(.5)?a.left=e[0]:a.right=e[0]),e.length==2&&(a.left=e[0],a.right=e[1]);const r={rt:this.jsPsych.randomization.sampleExGaussian(3e3,300,1/300,!0),labels:s.labels,response:a},i=this.jsPsych.pluginAPI.mergeSimulationData(r,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(s,i),i}simulate_data_only(s,t){const e=this.create_simulation_data(s,t);this.jsPsych.finishTrial(e)}simulate_visual(s,t,e){const a=this.create_simulation_data(s,t),r=this.jsPsych.getDisplayElement();this.trial(r,s),e();const i=[...r.querySelectorAll("[id^=jspsych-maxdiff-alternative]")].map(n=>n.innerHTML);if(a.response.left!==null){const n=i.indexOf(a.response.left);this.jsPsych.pluginAPI.clickTarget(r.querySelector(`.jspsych-maxdiff-alt-${n}[name="left"]`),a.rt/3)}if(a.response.right!==null){const n=i.indexOf(a.response.right);this.jsPsych.pluginAPI.clickTarget(r.querySelector(`.jspsych-maxdiff-alt-${n}[name="right"]`),a.rt/3*2)}this.jsPsych.pluginAPI.clickTarget(r.querySelector("#jspsych-maxdiff-next"),a.rt)}}return u.info=b,u}(jsPsychModule);
//# sourceMappingURL=index.browser.min.js.map
