var jsPsychExternalHtml=function(n){"use strict";var p="2.1.0";const d={name:"external-html",version:p,parameters:{url:{type:n.ParameterType.STRING,default:void 0},cont_key:{type:n.ParameterType.KEY,default:null},cont_btn:{type:n.ParameterType.STRING,default:null},check_fn:{type:n.ParameterType.FUNCTION,default:()=>!0},force_refresh:{type:n.ParameterType.BOOL,default:!1},execute_script:{type:n.ParameterType.BOOL,pretty_name:"Execute scripts",default:!1}},data:{url:{type:n.ParameterType.STRING},rt:{type:n.ParameterType.INT}},citations:{apa:"de Leeuw, J. R., Gilbert, R. A., & Luchterhandt, B. (2023). jsPsych: Enabling an Open-Source Collaborative Ecosystem of Behavioral Experiments. Journal of Open Source Software, 8(85), 5351. https://doi.org/10.21105/joss.05351 ",bibtex:'@article{Leeuw2023jsPsych, 	author = {de Leeuw, Joshua R. and Gilbert, Rebecca A. and Luchterhandt, Bj{\\" o}rn}, 	journal = {Journal of Open Source Software}, 	doi = {10.21105/joss.05351}, 	issn = {2475-9066}, 	number = {85}, 	year = {2023}, 	month = {may 11}, 	pages = {5351}, 	publisher = {Open Journals}, 	title = {jsPsych: Enabling an {Open}-{Source} {Collaborative} {Ecosystem} of {Behavioral} {Experiments}}, 	url = {https://joss.theoj.org/papers/10.21105/joss.05351}, 	volume = {8}, }  '}};class u{constructor(e){this.jsPsych=e}trial(e,t,a){let r;var o=t.url;return t.force_refresh&&(o=t.url+"?t="+performance.now()),fetch(o).then(s=>s.text()).then(s=>{e.innerHTML=s,a();var f=performance.now();const h=i=>{this.jsPsych.pluginAPI.compareKeys(i.key,t.cont_key)&&y()},y=()=>{if(!(t.check_fn&&!t.check_fn(e))){t.cont_key&&e.removeEventListener("keydown",h);var i={rt:Math.round(performance.now()-f),url:t.url};this.jsPsych.finishTrial(i),r()}};if(t.execute_script)for(var m=e.getElementsByTagName("script"),l=0;l<m.length;l++){const i=document.createElement("script"),c=m[l];i.text=c.text,c.parentNode.replaceChild(i,c)}t.cont_btn&&e.querySelector("#"+t.cont_btn).addEventListener("click",y),t.cont_key&&e.addEventListener("keydown",h)}).catch(s=>{console.error("Something went wrong with fetch() in plugin-external-html.",s)}),new Promise(s=>{r=s})}simulate(e,t,a,r){t=="data-only"&&(r(),this.simulate_data_only(e,a)),t=="visual"&&this.simulate_visual(e,a,r)}create_simulation_data(e,t){const a={url:e.url,rt:this.jsPsych.randomization.sampleExGaussian(2e3,200,.005,!0)},r=this.jsPsych.pluginAPI.mergeSimulationData(a,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,r),r}simulate_data_only(e,t){const a=this.create_simulation_data(e,t);this.jsPsych.finishTrial(a)}simulate_visual(e,t,a){const r=this.create_simulation_data(e,t),o=this.jsPsych.getDisplayElement();this.trial(o,e,()=>{a(),e.cont_key?this.jsPsych.pluginAPI.pressKey(e.cont_key,r.rt):e.cont_btn&&this.jsPsych.pluginAPI.clickTarget(o.querySelector("#"+e.cont_btn),r.rt)})}}return u.info=d,u}(jsPsychModule);
//# sourceMappingURL=index.browser.min.js.map
