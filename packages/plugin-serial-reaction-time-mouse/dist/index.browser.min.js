var jsPsychSerialReactionTimeMouse=function(s){"use strict";var y="2.1.0";const g={name:"serial-reaction-time-mouse",version:y,parameters:{grid:{type:s.ParameterType.BOOL,array:!0,default:[[1,1,1,1]]},target:{type:s.ParameterType.INT,array:!0,default:void 0},grid_square_size:{type:s.ParameterType.INT,default:100},target_color:{type:s.ParameterType.STRING,default:"#999"},response_ends_trial:{type:s.ParameterType.BOOL,default:!0},pre_target_duration:{type:s.ParameterType.INT,default:0},trial_duration:{type:s.ParameterType.INT,default:null},fade_duration:{type:s.ParameterType.INT,default:null},allow_nontarget_responses:{type:s.ParameterType.BOOL,default:!1},prompt:{type:s.ParameterType.HTML_STRING,default:null,no_function:!1}},data:{grid:{type:s.ParameterType.COMPLEX,array:!0},target:{type:s.ParameterType.COMPLEX,array:!0},response:{type:s.ParameterType.INT,array:!0},rt:{type:s.ParameterType.INT},correct:{type:s.ParameterType.BOOL}},citations:{apa:"de Leeuw, J. R., Gilbert, R. A., & Luchterhandt, B. (2023). jsPsych: Enabling an Open-Source Collaborative Ecosystem of Behavioral Experiments. Journal of Open Source Software, 8(85), 5351. https://doi.org/10.21105/joss.05351 ",bibtex:'@article{Leeuw2023jsPsych, 	author = {de Leeuw, Joshua R. and Gilbert, Rebecca A. and Luchterhandt, Bj{\\" o}rn}, 	journal = {Journal of Open Source Software}, 	doi = {10.21105/joss.05351}, 	issn = {2475-9066}, 	number = {85}, 	year = {2023}, 	month = {may 11}, 	pages = {5351}, 	publisher = {Open Journals}, 	title = {jsPsych: Enabling an {Open}-{Source} {Collaborative} {Ecosystem} of {Behavioral} {Experiments}}, 	url = {https://joss.theoj.org/papers/10.21105/joss.05351}, 	volume = {8}, }  '}};class m{constructor(t){this.jsPsych=t}trial(t,e){var r=-1,a={rt:null,row:null,column:null};const o=()=>{var u;e.allow_nontarget_responses?u=t.querySelectorAll(".jspsych-serial-reaction-time-stimulus-cell"):u=[t.querySelector("#jspsych-serial-reaction-time-stimulus-cell-"+e.target[0]+"-"+e.target[1])];for(var d=0;d<u.length;d++)u[d].addEventListener("mousedown",p=>{if(r!=-1){var c={};c.row=p.currentTarget.getAttribute("data-row"),c.column=p.currentTarget.getAttribute("data-column"),c.rt=Math.round(performance.now()-r),n(c)}});r=performance.now(),e.fade_duration==null||(t.querySelector("#jspsych-serial-reaction-time-stimulus-cell-"+e.target[0]+"-"+e.target[1]).style.transition="background-color "+e.fade_duration),t.querySelector("#jspsych-serial-reaction-time-stimulus-cell-"+e.target[0]+"-"+e.target[1]).style.backgroundColor=e.target_color,e.trial_duration!==null&&this.jsPsych.pluginAPI.setTimeout(l,e.trial_duration)};var i=this.stimulus(e.grid,e.grid_square_size);t.innerHTML=i,e.pre_target_duration<=0?o():this.jsPsych.pluginAPI.setTimeout(o,e.pre_target_duration),e.prompt!==null&&t.insertAdjacentHTML("beforeend",e.prompt);const l=()=>{var u={rt:a.rt,grid:e.grid,target:e.target,response:[parseInt(a.row,10),parseInt(a.column,10)],correct:a.row==e.target[0]&&a.column==e.target[1]};this.jsPsych.finishTrial(u)};function n(u){a=a.rt==null?u:a,e.response_ends_trial&&l()}}stimulus(t,e,r,a,o){for(var i="<div id='jspsych-serial-reaction-time-stimulus' style='margin:auto; display: table; table-layout: fixed; border-spacing:"+e/4+"px'>",l=0;l<t.length;l++){i+="<div class='jspsych-serial-reaction-time-stimulus-row' style='display:table-row;'>";for(var n=0;n<t[l].length;n++){var u="jspsych-serial-reaction-time-stimulus-cell";i+="<div class='"+u+"' id='jspsych-serial-reaction-time-stimulus-cell-"+l+"-"+n+"' data-row="+l+" data-column="+n+" style='width:"+e+"px; height:"+e+"px; display:table-cell; vertical-align:middle; text-align: center; cursor: pointer; font-size:"+e/2+"px;",t[l][n]==1&&(i+="border: 2px solid black;"),typeof r!="undefined"&&r[0]==l&&r[1]==n&&(i+="background-color: "+a+";"),i+="'>",typeof o!="undefined"&&o[l][n]!==!1&&(i+=o[l][n]),i+="</div>"}i+="</div>"}return i+="</div>",i}simulate(t,e,r,a){e=="data-only"&&(a(),this.simulate_data_only(t,r)),e=="visual"&&this.simulate_visual(t,r,a)}create_simulation_data(t,e){let r=this.jsPsych.utils.deepCopy(t.target);if(t.allow_nontarget_responses&&this.jsPsych.randomization.sampleBernoulli(.8)!==1)for(;r[0]==t.target[0]&&r[1]==t.target[1];)r[0]==this.jsPsych.randomization.randomInt(0,t.grid.length),r[1]==this.jsPsych.randomization.randomInt(0,t.grid[r[0]].length);const a={grid:t.grid,target:t.target,response:r,rt:t.pre_target_duration+this.jsPsych.randomization.sampleExGaussian(500,50,1/150,!0),correct:r[0]==t.target[0]&&r[1]==t.target[1]},o=this.jsPsych.pluginAPI.mergeSimulationData(a,e);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(t,o),o}simulate_data_only(t,e){const r=this.create_simulation_data(t,e);this.jsPsych.finishTrial(r)}simulate_visual(t,e,r){const a=this.create_simulation_data(t,e),o=this.jsPsych.getDisplayElement();if(this.trial(o,t),r(),a.rt!==null){const i=o.querySelector(`.jspsych-serial-reaction-time-stimulus-cell[data-row="${a.response[0]}"][data-column="${a.response[1]}"]`);this.jsPsych.pluginAPI.clickTarget(i,a.rt)}}}return m.info=g,m}(jsPsychModule);
//# sourceMappingURL=index.browser.min.js.map
