var jsPsychExtensionMouseTracking=function(t){"use strict";var c="1.2.0",h=(l,i,e)=>new Promise((n,r)=>{var a=s=>{try{o(e.next(s))}catch(m){r(m)}},T=s=>{try{o(e.throw(s))}catch(m){r(m)}},o=s=>s.done?n(s.value):Promise.resolve(s.value).then(a,T);o((e=e.apply(l,i)).next())});class u{constructor(i){this.jsPsych=i,this.initialize=e=>h(this,[e],function*({minimum_sample_time:n=0}){this.domObserver=new MutationObserver(this.mutationObserverCallback),this.minimumSampleTime=n}),this.on_start=e=>{e=e||{},this.currentTrialData=[],this.currentTrialTargets=new Map,this.currentTrialSelectors=e.targets||[],this.lastSampleTime=null,this.eventsToTrack=e.events||["mousemove"],this.domObserver.observe(this.jsPsych.getDisplayElement(),{childList:!0})},this.on_load=()=>{this.currentTrialStartTime=performance.now(),this.eventsToTrack.includes("mousemove")&&window.addEventListener("mousemove",this.mouseMoveEventHandler),this.eventsToTrack.includes("mousedown")&&window.addEventListener("mousedown",this.mouseDownEventHandler),this.eventsToTrack.includes("mouseup")&&window.addEventListener("mouseup",this.mouseUpEventHandler)},this.on_finish=()=>(this.domObserver.disconnect(),this.eventsToTrack.includes("mousemove")&&window.removeEventListener("mousemove",this.mouseMoveEventHandler),this.eventsToTrack.includes("mousedown")&&window.removeEventListener("mousedown",this.mouseDownEventHandler),this.eventsToTrack.includes("mouseup")&&window.removeEventListener("mouseup",this.mouseUpEventHandler),{mouse_tracking_data:this.currentTrialData,mouse_tracking_targets:Object.fromEntries(this.currentTrialTargets.entries())}),this.mouseMoveEventHandler=({clientX:e,clientY:n})=>{const r=performance.now(),a=Math.round(r-this.currentTrialStartTime);(this.lastSampleTime===null||r-this.lastSampleTime>=this.minimumSampleTime)&&(this.lastSampleTime=r,this.currentTrialData.push({x:e,y:n,t:a,event:"mousemove"}))},this.mouseUpEventHandler=({clientX:e,clientY:n})=>{const r=performance.now(),a=Math.round(r-this.currentTrialStartTime);this.currentTrialData.push({x:e,y:n,t:a,event:"mouseup"})},this.mouseDownEventHandler=({clientX:e,clientY:n})=>{const r=performance.now(),a=Math.round(r-this.currentTrialStartTime);this.currentTrialData.push({x:e,y:n,t:a,event:"mousedown"})},this.mutationObserverCallback=(e,n)=>{for(const r of this.currentTrialSelectors)if(!this.currentTrialTargets.has(r)){const a=this.jsPsych.getDisplayElement().querySelector(r);a&&this.currentTrialTargets.set(r,a.getBoundingClientRect())}}}}return u.info={name:"mouse-tracking",version:c,data:{mouse_tracking_data:{type:t.ParameterType.COMPLEX,array:!0,nested:{x:{type:t.ParameterType.INT},y:{type:t.ParameterType.INT},t:{type:t.ParameterType.INT},event:{type:t.ParameterType.STRING}}},mouse_tracking_targets:{type:t.ParameterType.COMPLEX,nested:{x:{type:t.ParameterType.INT},y:{type:t.ParameterType.INT},width:{type:t.ParameterType.INT},height:{type:t.ParameterType.INT},top:{type:t.ParameterType.INT},bottom:{type:t.ParameterType.INT},left:{type:t.ParameterType.INT},right:{type:t.ParameterType.INT}}}},citations:{apa:"de Leeuw, J. R., Gilbert, R. A., & Luchterhandt, B. (2023). jsPsych: Enabling an Open-Source Collaborative Ecosystem of Behavioral Experiments. Journal of Open Source Software, 8(85), 5351. https://doi.org/10.21105/joss.05351 ",bibtex:'@article{Leeuw2023jsPsych, 	author = {de Leeuw, Joshua R. and Gilbert, Rebecca A. and Luchterhandt, Bj{\\" o}rn}, 	journal = {Journal of Open Source Software}, 	doi = {10.21105/joss.05351}, 	issn = {2475-9066}, 	number = {85}, 	year = {2023}, 	month = {may 11}, 	pages = {5351}, 	publisher = {Open Journals}, 	title = {jsPsych: Enabling an {Open}-{Source} {Collaborative} {Ecosystem} of {Behavioral} {Experiments}}, 	url = {https://joss.theoj.org/papers/10.21105/joss.05351}, 	volume = {8}, }  '}},u}(jsPsychModule);
//# sourceMappingURL=index.browser.min.js.map
