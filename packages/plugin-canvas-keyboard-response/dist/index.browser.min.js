var jsPsychCanvasKeyboardResponse=function(i){"use strict";var c="2.1.0";const p={name:"canvas-keyboard-response",version:c,parameters:{stimulus:{type:i.ParameterType.FUNCTION,default:void 0},choices:{type:i.ParameterType.KEYS,default:"ALL_KEYS"},prompt:{type:i.ParameterType.HTML_STRING,default:null},stimulus_duration:{type:i.ParameterType.INT,default:null},trial_duration:{type:i.ParameterType.INT,default:null},response_ends_trial:{type:i.ParameterType.BOOL,default:!0},canvas_size:{type:i.ParameterType.INT,array:!0,default:[500,500]}},data:{response:{type:i.ParameterType.STRING},rt:{type:i.ParameterType.INT}},citations:{apa:"de Leeuw, J. R., Gilbert, R. A., & Luchterhandt, B. (2023). jsPsych: Enabling an Open-Source Collaborative Ecosystem of Behavioral Experiments. Journal of Open Source Software, 8(85), 5351. https://doi.org/10.21105/joss.05351 ",bibtex:'@article{Leeuw2023jsPsych, 	author = {de Leeuw, Joshua R. and Gilbert, Rebecca A. and Luchterhandt, Bj{\\" o}rn}, 	journal = {Journal of Open Source Software}, 	doi = {10.21105/joss.05351}, 	issn = {2475-9066}, 	number = {85}, 	year = {2023}, 	month = {may 11}, 	pages = {5351}, 	publisher = {Open Journals}, 	title = {jsPsych: Enabling an {Open}-{Source} {Collaborative} {Ecosystem} of {Behavioral} {Experiments}}, 	url = {https://joss.theoj.org/papers/10.21105/joss.05351}, 	volume = {8}, }  '}};class l{constructor(s){this.jsPsych=s}trial(s,e){var t='<div id="jspsych-canvas-keyboard-response-stimulus"><canvas id="jspsych-canvas-stimulus" height="'+e.canvas_size[0]+'" width="'+e.canvas_size[1]+'"></canvas></div>';e.prompt!==null&&(t+=e.prompt),s.innerHTML=t;let a=document.getElementById("jspsych-canvas-stimulus");a.style.display="block",e.stimulus(a);var r={rt:null,key:null};const o=()=>{typeof u!="undefined"&&this.jsPsych.pluginAPI.cancelKeyboardResponse(u);var n={rt:r.rt,response:r.key};this.jsPsych.finishTrial(n)};var y=n=>{s.querySelector("#jspsych-canvas-keyboard-response-stimulus").className+=" responded",r.key==null&&(r=n),e.response_ends_trial&&o()};if(e.choices!="NO_KEYS")var u=this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:y,valid_responses:e.choices,rt_method:"performance",persist:!1,allow_held_key:!1});e.stimulus_duration!==null&&this.jsPsych.pluginAPI.setTimeout(()=>{s.querySelector("#jspsych-canvas-keyboard-response-stimulus").style.visibility="hidden"},e.stimulus_duration),e.trial_duration!==null&&this.jsPsych.pluginAPI.setTimeout(()=>{o()},e.trial_duration)}simulate(s,e,t,a){e=="data-only"&&(a(),this.simulate_data_only(s,t)),e=="visual"&&this.simulate_visual(s,t,a)}simulate_data_only(s,e){const t=this.create_simulation_data(s,e);this.jsPsych.finishTrial(t)}simulate_visual(s,e,t){const a=this.create_simulation_data(s,e),r=this.jsPsych.getDisplayElement();this.trial(r,s),t(),a.rt!==null&&this.jsPsych.pluginAPI.pressKey(a.response,a.rt)}create_simulation_data(s,e){const t={rt:this.jsPsych.randomization.sampleExGaussian(500,50,.006666666666666667,!0),response:this.jsPsych.pluginAPI.getValidKey(s.choices)},a=this.jsPsych.pluginAPI.mergeSimulationData(t,e);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(s,a),a}}return l.info=p,l}(jsPsychModule);
//# sourceMappingURL=index.browser.min.js.map
