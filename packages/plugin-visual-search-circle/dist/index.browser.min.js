var jsPsychVisualSearchCircle=function(a){"use strict";var g="2.2.0";const d={name:"visual-search-circle",version:g,parameters:{target:{type:a.ParameterType.IMAGE,default:null},foil:{type:a.ParameterType.IMAGE,default:null},set_size:{type:a.ParameterType.INT,default:null},stimuli:{type:a.ParameterType.IMAGE,default:[],array:!0},target_present:{type:a.ParameterType.BOOL,default:void 0},fixation_image:{type:a.ParameterType.IMAGE,default:void 0},target_size:{type:a.ParameterType.INT,array:!0,default:[50,50]},fixation_size:{type:a.ParameterType.INT,array:!0,default:[16,16]},circle_diameter:{type:a.ParameterType.INT,default:250},target_present_key:{type:a.ParameterType.KEY,default:"j"},target_absent_key:{type:a.ParameterType.KEY,default:"f"},trial_duration:{type:a.ParameterType.INT,default:null},fixation_duration:{type:a.ParameterType.INT,default:1e3},randomize_item_locations:{type:a.ParameterType.BOOL,pretty_name:"Randomize item locations",default:!0},location_first_item:{type:a.ParameterType.INT,pretty_name:"Location first item",default:0},response_ends_trial:{type:a.ParameterType.BOOL,default:!0}},data:{correct:{type:a.ParameterType.BOOL},response:{type:a.ParameterType.STRING},rt:{type:a.ParameterType.INT},set_size:{type:a.ParameterType.INT},target_present:{type:a.ParameterType.BOOL},locations:{type:a.ParameterType.INT,array:!0}},citations:{apa:"de Leeuw, J. R., Gilbert, R. A., & Luchterhandt, B. (2023). jsPsych: Enabling an Open-Source Collaborative Ecosystem of Behavioral Experiments. Journal of Open Source Software, 8(85), 5351. https://doi.org/10.21105/joss.05351 ",bibtex:'@article{Leeuw2023jsPsych, 	author = {de Leeuw, Joshua R. and Gilbert, Rebecca A. and Luchterhandt, Bj{\\" o}rn}, 	journal = {Journal of Open Source Software}, 	doi = {10.21105/joss.05351}, 	issn = {2475-9066}, 	number = {85}, 	year = {2023}, 	month = {may 11}, 	pages = {5351}, 	publisher = {Open Journals}, 	title = {jsPsych: Enabling an {Open}-{Source} {Collaborative} {Ecosystem} of {Behavioral} {Experiments}}, 	url = {https://joss.theoj.org/papers/10.21105/joss.05351}, 	volume = {8}, }  '}};class h{constructor(e){this.jsPsych=e}trial(e,t){var r=t.circle_diameter+t.target_size[0],i=this.generateFixationLoc(t),n=this.generatePresentationSet(t),o=this.generateDisplayLocs(n.length,t);e.innerHTML+='<div id="jspsych-visual-search-circle-container" style="position: relative; width:'+r+"px; height:"+r+'px"></div>';var u=e.querySelector("#jspsych-visual-search-circle-container");const y=()=>{u.innerHTML+="<img src='"+t.fixation_image+"' style='position: absolute; top:"+i[0]+"px; left:"+i[1]+"px; width:"+t.fixation_size[0]+"px; height:"+t.fixation_size[1]+"px;'></img>",this.jsPsych.pluginAPI.setTimeout(()=>{c()},t.fixation_duration)},l={rt:null,key:null,correct:!1},p=()=>{this.jsPsych.pluginAPI.cancelAllKeyboardResponses();const s={correct:l.correct,rt:l.rt,response:l.key,locations:o,target_present:t.target_present,set_size:t.set_size};this.jsPsych.finishTrial(s)};y();const c=()=>{for(var s=0;s<o.length;s++)u.innerHTML+="<img src='"+n[s]+"' style='position: absolute; top:"+o[s][0]+"px; left:"+o[s][1]+"px; width:"+t.target_size[0]+"px; height:"+t.target_size[1]+"px;'></img>";const f=_=>{var m=!1;(this.jsPsych.pluginAPI.compareKeys(_.key,t.target_present_key)&&t.target_present||this.jsPsych.pluginAPI.compareKeys(_.key,t.target_absent_key)&&!t.target_present)&&(m=!0),l.rt=_.rt,l.key=_.key,l.correct=m,t.response_ends_trial&&p()},P=[t.target_present_key,t.target_absent_key],T=this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:f,valid_responses:P,rt_method:"performance",persist:!1,allow_held_key:!1});t.trial_duration!==null&&this.jsPsych.pluginAPI.setTimeout(()=>{l.rt||this.jsPsych.pluginAPI.cancelKeyboardResponse(T),p()},t.trial_duration)}}generateFixationLoc(e){var t=e.circle_diameter+e.target_size[0];return[Math.floor(t/2-e.fixation_size[0]/2),Math.floor(t/2-e.fixation_size[1]/2)]}generateDisplayLocs(e,t){for(var r=t.circle_diameter,i=r/2,n=r+t.target_size[0],o=t.target_size[0],u=t.target_size[1],y=o/2,l=u/2,p=[],c=t.randomize_item_locations?Math.floor(Math.random()*360):t.location_first_item-180,s=0;s<e;s++)p.push([Math.floor(n/2+this.cosd(c+s*(360/e))*i-l),Math.floor(n/2-this.sind(c+s*(360/e))*i-y)]);return p}generatePresentationSet(e){var t=[];if(e.target!==null&&e.foil!==null&&e.set_size!==null)if(e.target_present){for(var r=0;r<e.set_size-1;r++)t.push(e.foil);t.push(e.target)}else for(var r=0;r<e.set_size;r++)t.push(e.foil);else e.stimuli.length>0?t=e.stimuli:console.error("Error in visual-search-circle plugin: you must specify an array of images via the stimuli parameter OR specify the target, foil and set_size parameters.");return t}cosd(e){return Math.cos(e/180*Math.PI)}sind(e){return Math.sin(e/180*Math.PI)}simulate(e,t,r,i){t=="data-only"&&(i(),this.simulate_data_only(e,r)),t=="visual"&&this.simulate_visual(e,r,i)}create_simulation_data(e,t){const r=this.jsPsych.pluginAPI.getValidKey([e.target_present_key,e.target_absent_key]),i=this.generatePresentationSet(e),n={correct:e.target_present?r==e.target_present_key:r==e.target_absent_key,response:r,rt:this.jsPsych.randomization.sampleExGaussian(500,50,1/150,!0),set_size:i.length,target_present:e.target_present,locations:this.generateDisplayLocs(i.length,e)},o=this.jsPsych.pluginAPI.mergeSimulationData(n,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,o),o}simulate_data_only(e,t){const r=this.create_simulation_data(e,t);this.jsPsych.finishTrial(r)}simulate_visual(e,t,r){const i=this.create_simulation_data(e,t),n=this.jsPsych.getDisplayElement();this.trial(n,e),r(),i.rt!==null&&this.jsPsych.pluginAPI.pressKey(i.response,e.fixation_duration+i.rt)}}return h.info=d,h}(jsPsychModule);
//# sourceMappingURL=index.browser.min.js.map
