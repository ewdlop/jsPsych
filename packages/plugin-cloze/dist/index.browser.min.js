var jsPsychCloze=function(n){"use strict";var d="2.2.0";const f={name:"cloze",version:d,parameters:{text:{type:n.ParameterType.HTML_STRING,default:void 0},button_text:{type:n.ParameterType.STRING,default:"OK"},check_answers:{type:n.ParameterType.BOOL,default:!1},allow_blanks:{type:n.ParameterType.BOOL,default:!0},case_sensitivity:{type:n.ParameterType.BOOL,pretty_name:"Case sensitivity",default:!0},mistake_fn:{type:n.ParameterType.FUNCTION,default:()=>{}},autofocus:{type:n.ParameterType.BOOL,default:!0}},data:{response:{type:n.ParameterType.STRING,array:!0}},citations:{apa:"de Leeuw, J. R., Gilbert, R. A., & Luchterhandt, B. (2023). jsPsych: Enabling an Open-Source Collaborative Ecosystem of Behavioral Experiments. Journal of Open Source Software, 8(85), 5351. https://doi.org/10.21105/joss.05351 ",bibtex:'@article{Leeuw2023jsPsych, 	author = {de Leeuw, Joshua R. and Gilbert, Rebecca A. and Luchterhandt, Bj{\\" o}rn}, 	journal = {Journal of Open Source Software}, 	doi = {10.21105/joss.05351}, 	issn = {2475-9066}, 	number = {85}, 	year = {2023}, 	month = {may 11}, 	pages = {5351}, 	publisher = {Open Journals}, 	title = {jsPsych: Enabling an {Open}-{Source} {Collaborative} {Ecosystem} of {Behavioral} {Experiments}}, 	url = {https://joss.theoj.org/papers/10.21105/joss.05351}, 	volume = {8}, }  '}};class p{constructor(t){this.jsPsych=t}trial(t,e){var s='<div class="cloze">',a=e.text.split("%");const o=this.getSolutions(e.text,e.case_sensitivity);let r=0;for(var i=0;i<a.length;i++)i%2===0?s+=a[i]:(s+=`<input type="text" id="input${r}" value="">`,r++);s+="</div>",t.innerHTML=s;const l=()=>{for(var c=[],y=!0,m=!0,u=0;u<o.length;u++){var h=document.getElementById("input"+u);c.push(e.case_sensitivity?h.value.trim():h.value.toLowerCase().trim()),e.check_answers&&(o[u].includes(c[u])?h.style.color="black":(h.style.color="red",y=!1)),e.allow_blanks||c[u]===""&&(m=!1)}if(e.check_answers&&!y||!e.allow_blanks&&!m)e.mistake_fn();else{var _={response:c};this.jsPsych.finishTrial(_)}};t.innerHTML+='<br><button class="jspsych-html-button-response-button" type="button" id="finish_cloze_button">'+e.button_text+"</button>",t.querySelector("#finish_cloze_button").addEventListener("click",l),e.autofocus&&t.querySelector("#input0").focus()}getSolutions(t,e){const s=[],a=t.split("%");for(let o=1;o<a.length;o+=2)s.push(e?a[o].trim().split("/"):a[o].toLowerCase().trim().split("/"));return s}simulate(t,e,s,a){e=="data-only"&&(a(),this.simulate_data_only(t,s)),e=="visual"&&this.simulate_visual(t,s,a)}create_simulation_data(t,e){const s=this.getSolutions(t.text,t.case_sensitivity),a=[];for(const i of s)if(i.includes("")){var o=this.jsPsych.randomization.randomWords({exactly:1});a.push(o[0])}else a.push(i[Math.floor(Math.random()*i.length)]);const r={response:a};return this.jsPsych.pluginAPI.mergeSimulationData(r,e)}simulate_data_only(t,e){const s=this.create_simulation_data(t,e);this.jsPsych.finishTrial(s)}simulate_visual(t,e,s){const a=this.create_simulation_data(t,e),o=this.jsPsych.getDisplayElement();this.trial(o,t),s();const r=o.querySelectorAll('input[type="text"]');let i=this.jsPsych.randomization.sampleExGaussian(750,200,.01,!0);for(let l=0;l<a.response.length;l++)this.jsPsych.pluginAPI.fillTextInput(r[l],a.response[l],i),i+=this.jsPsych.randomization.sampleExGaussian(750,200,.01,!0);this.jsPsych.pluginAPI.clickTarget(o.querySelector("#finish_cloze_button"),i)}}return p.info=f,p}(jsPsychModule);
//# sourceMappingURL=index.browser.min.js.map
