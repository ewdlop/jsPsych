var jsPsychCategorizeImage=function(a){"use strict";var c="2.1.0";const m={name:"categorize-image",version:c,parameters:{stimulus:{type:a.ParameterType.IMAGE,default:void 0},key_answer:{type:a.ParameterType.KEY,default:void 0},choices:{type:a.ParameterType.KEYS,default:"ALL_KEYS"},text_answer:{type:a.ParameterType.HTML_STRING,default:null},correct_text:{type:a.ParameterType.HTML_STRING,default:"<p class='feedback'>Correct</p>"},incorrect_text:{type:a.ParameterType.HTML_STRING,default:"<p class='feedback'>Wrong</p>"},prompt:{type:a.ParameterType.HTML_STRING,default:null},force_correct_button_press:{type:a.ParameterType.BOOL,default:!1},show_stim_with_feedback:{type:a.ParameterType.BOOL,default:!0,no_function:!1},show_feedback_on_timeout:{type:a.ParameterType.BOOL,default:!1},timeout_message:{type:a.ParameterType.HTML_STRING,default:"<p>Please respond faster.</p>"},stimulus_duration:{type:a.ParameterType.INT,default:null},trial_duration:{type:a.ParameterType.INT,default:null},feedback_duration:{type:a.ParameterType.INT,default:2e3}},data:{stimulus:{type:a.ParameterType.STRING},response:{type:a.ParameterType.STRING},rt:{type:a.ParameterType.INT},correct:{type:a.ParameterType.BOOL}},citations:{apa:"de Leeuw, J. R., Gilbert, R. A., & Luchterhandt, B. (2023). jsPsych: Enabling an Open-Source Collaborative Ecosystem of Behavioral Experiments. Journal of Open Source Software, 8(85), 5351. https://doi.org/10.21105/joss.05351 ",bibtex:'@article{Leeuw2023jsPsych, 	author = {de Leeuw, Joshua R. and Gilbert, Rebecca A. and Luchterhandt, Bj{\\" o}rn}, 	journal = {Journal of Open Source Software}, 	doi = {10.21105/joss.05351}, 	issn = {2475-9066}, 	number = {85}, 	year = {2023}, 	month = {may 11}, 	pages = {5351}, 	publisher = {Open Journals}, 	title = {jsPsych: Enabling an {Open}-{Source} {Collaborative} {Ecosystem} of {Behavioral} {Experiments}}, 	url = {https://joss.theoj.org/papers/10.21105/joss.05351}, 	volume = {8}, }  '}};class u{constructor(t){this.jsPsych=t}trial(t,e){t.innerHTML='<img id="jspsych-categorize-image-stimulus" class="jspsych-categorize-image-stimulus" src="'+e.stimulus+'"></img>',e.stimulus_duration!==null&&this.jsPsych.pluginAPI.setTimeout(()=>{t.querySelector("#jspsych-categorize-image-stimulus").style.visibility="hidden"},e.stimulus_duration),e.prompt!==null&&(t.innerHTML+=e.prompt);var r={};const s=o=>{this.jsPsych.pluginAPI.cancelAllKeyboardResponses();var l=!1;this.jsPsych.pluginAPI.compareKeys(e.key_answer,o.key)&&(l=!0),r={rt:o.rt,correct:l,stimulus:e.stimulus,response:o.key};var n=o.rt==null;p(l,n)};this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:s,valid_responses:e.choices,rt_method:"performance",persist:!1,allow_held_key:!1}),e.trial_duration!==null&&this.jsPsych.pluginAPI.setTimeout(()=>{s({key:null,rt:null})},e.trial_duration);const i=()=>{this.jsPsych.finishTrial(r)},p=(o,l)=>{if(l&&!e.show_feedback_on_timeout)t.innerHTML+=e.timeout_message;else{e.show_stim_with_feedback&&(t.innerHTML='<img id="jspsych-categorize-image-stimulus" class="jspsych-categorize-image-stimulus" src="'+e.stimulus+'"></img>');var n="";o?n=e.correct_text.replace("%ANS%",e.text_answer):n=e.incorrect_text.replace("%ANS%",e.text_answer),t.innerHTML+=n}if(e.force_correct_button_press&&o===!1&&(l&&e.show_feedback_on_timeout||!l)){var _=d=>{i()};this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:_,valid_responses:[e.key_answer],rt_method:"performance",persist:!1,allow_held_key:!1})}else this.jsPsych.pluginAPI.setTimeout(i,e.feedback_duration)}}simulate(t,e,r,s){e=="data-only"&&(s(),this.simulate_data_only(t,r)),e=="visual"&&this.simulate_visual(t,r,s)}create_simulation_data(t,e){const r=this.jsPsych.pluginAPI.getValidKey(t.choices),s={stimulus:t.stimulus,response:r,rt:this.jsPsych.randomization.sampleExGaussian(500,50,1/150,!0),correct:r==t.key_answer},i=this.jsPsych.pluginAPI.mergeSimulationData(s,e);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(t,i),i}simulate_data_only(t,e){const r=this.create_simulation_data(t,e);this.jsPsych.finishTrial(r)}simulate_visual(t,e,r){const s=this.create_simulation_data(t,e),i=this.jsPsych.getDisplayElement();this.trial(i,t),r(),s.rt!==null&&this.jsPsych.pluginAPI.pressKey(s.response,s.rt),t.force_correct_button_press&&!s.correct&&this.jsPsych.pluginAPI.pressKey(t.key_answer,s.rt+t.feedback_duration/2)}}return u.info=m,u}(jsPsychModule);
//# sourceMappingURL=index.browser.min.js.map
