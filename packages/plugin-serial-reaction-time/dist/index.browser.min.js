var jsPsychSerialReactionTime=function(s){"use strict";var m="2.1.0";const g={name:"serial-reaction-time",version:m,parameters:{grid:{type:s.ParameterType.BOOL,array:!0,default:[[1,1,1,1]]},target:{type:s.ParameterType.INT,array:!0,default:void 0},choices:{type:s.ParameterType.KEYS,array:!0,default:[["3","5","7","9"]]},grid_square_size:{type:s.ParameterType.INT,default:100},target_color:{type:s.ParameterType.STRING,default:"#999"},response_ends_trial:{type:s.ParameterType.BOOL,default:!0},pre_target_duration:{type:s.ParameterType.INT,default:0},trial_duration:{type:s.ParameterType.INT,default:null},show_response_feedback:{type:s.ParameterType.BOOL,default:!1},feedback_duration:{type:s.ParameterType.INT,default:200},fade_duration:{type:s.ParameterType.INT,default:null},prompt:{type:s.ParameterType.HTML_STRING,default:null,no_function:!1}},data:{grid:{type:s.ParameterType.COMPLEX,array:!0},target:{type:s.ParameterType.COMPLEX,array:!0},response:{type:s.ParameterType.STRING,array:!0},rt:{type:s.ParameterType.INT},correct:{type:s.ParameterType.BOOL}},citations:{apa:"de Leeuw, J. R., Gilbert, R. A., & Luchterhandt, B. (2023). jsPsych: Enabling an Open-Source Collaborative Ecosystem of Behavioral Experiments. Journal of Open Source Software, 8(85), 5351. https://doi.org/10.21105/joss.05351 ",bibtex:'@article{Leeuw2023jsPsych, 	author = {de Leeuw, Joshua R. and Gilbert, Rebecca A. and Luchterhandt, Bj{\\" o}rn}, 	journal = {Journal of Open Source Software}, 	doi = {10.21105/joss.05351}, 	issn = {2475-9066}, 	number = {85}, 	year = {2023}, 	month = {may 11}, 	pages = {5351}, 	publisher = {Open Journals}, 	title = {jsPsych: Enabling an {Open}-{Source} {Collaborative} {Ecosystem} of {Behavioral} {Experiments}}, 	url = {https://joss.theoj.org/papers/10.21105/joss.05351}, 	volume = {8}, }  '}};class h{constructor(t){this.jsPsych=t,this.stimulus=function(e,r,i,a,c){for(var l="<div id='jspsych-serial-reaction-time-stimulus' style='margin:auto; display: table; table-layout: fixed; border-spacing:"+r/4+"px'>",o=0;o<e.length;o++){l+="<div class='jspsych-serial-reaction-time-stimulus-row' style='display:table-row;'>";for(var n=0;n<e[o].length;n++)l+="<div class='jspsych-serial-reaction-time-stimulus-cell' id='jspsych-serial-reaction-time-stimulus-cell-"+o+"-"+n+"' style='width:"+r+"px; height:"+r+"px; display:table-cell; vertical-align:middle; text-align: center; font-size:"+r/2+"px;",e[o][n]==1&&(l+="border: 2px solid black;"),typeof i!="undefined"&&i[0]==o&&i[1]==n&&(l+="background-color: "+a+";"),l+="'>",typeof c!="undefined"&&c[o][n]!==!1&&(l+=c[o][n]),l+="</div>";l+="</div>"}return l+="</div>",l}}trial(t,e){for(var r=e.choices.flat();r.indexOf("")>-1;)r.splice(r.indexOf(""),1);var i,a={rt:null,key:!1,correct:!1};const c=()=>{this.jsPsych.pluginAPI.cancelKeyboardResponse(i);var u={rt:a.rt,response:a.key,correct:a.correct,grid:e.grid,target:e.target};this.jsPsych.finishTrial(u)},l=()=>{if(a.rt==null||e.show_response_feedback==!1)c();else{var u=a.correct?"#0f0":"#f00";t.querySelector("#jspsych-serial-reaction-time-stimulus-cell-"+a.responseLoc[0]+"-"+a.responseLoc[1]).style.transition="",t.querySelector("#jspsych-serial-reaction-time-stimulus-cell-"+a.responseLoc[0]+"-"+a.responseLoc[1]).style.backgroundColor=u,this.jsPsych.pluginAPI.setTimeout(c,e.feedback_duration)}},o=u=>{a=a.rt==null?u:a;for(var y=[],d=0;d<e.choices.length;d++)for(var p=0;p<e.choices[d].length;p++){var P=e.choices[d][p];if(this.jsPsych.pluginAPI.compareKeys(u.key,P)){y=[d,p];break}}a.responseLoc=y,a.correct=JSON.stringify(y)==JSON.stringify(e.target),e.response_ends_trial&&(e.show_response_feedback?l():c())},n=()=>{e.fade_duration==null||(t.querySelector("#jspsych-serial-reaction-time-stimulus-cell-"+e.target[0]+"-"+e.target[1]).style.transition="background-color "+e.fade_duration),t.querySelector("#jspsych-serial-reaction-time-stimulus-cell-"+e.target[0]+"-"+e.target[1]).style.backgroundColor=e.target_color,i=this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:o,valid_responses:r,allow_held_key:!1}),e.trial_duration!==null&&this.jsPsych.pluginAPI.setTimeout(l,e.trial_duration)};var f=this.stimulus(e.grid,e.grid_square_size);t.innerHTML=f,e.pre_target_duration<=0?n():this.jsPsych.pluginAPI.setTimeout(n,e.pre_target_duration),e.prompt!==null&&(t.innerHTML+=e.prompt)}simulate(t,e,r,i){e=="data-only"&&(i(),this.simulate_data_only(t,r)),e=="visual"&&this.simulate_visual(t,r,i)}create_simulation_data(t,e){let r;if(this.jsPsych.randomization.sampleBernoulli(.8)==1)r=t.choices[t.target[0]][t.target[1]];else for(r=this.jsPsych.pluginAPI.getValidKey(t.choices);r==t.choices[t.target[0]][t.target[1]];)r=this.jsPsych.pluginAPI.getValidKey(t.choices);const i={grid:t.grid,target:t.target,response:r,rt:this.jsPsych.randomization.sampleExGaussian(500,50,1/150,!0),correct:r==t.choices[t.target[0]][t.target[1]]},a=this.jsPsych.pluginAPI.mergeSimulationData(i,e);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(t,a),a}simulate_data_only(t,e){const r=this.create_simulation_data(t,e);this.jsPsych.finishTrial(r)}simulate_visual(t,e,r){const i=this.create_simulation_data(t,e),a=this.jsPsych.getDisplayElement();this.trial(a,t),r(),i.rt!==null&&this.jsPsych.pluginAPI.pressKey(i.response,i.rt)}}return h.info=g,h}(jsPsychModule);
//# sourceMappingURL=index.browser.min.js.map
